<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <title>[[=hData.sTitle]]</title>
    <meta name="description" content="" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="/assets/css/journal.bootstrap.min.css">
    <script src="/assets/js/require.js"></script>
    <style type="text/css">
        .fade {
            position: absolute;  /* makes the div go into a position that’s absolute to the browser viewing area */
            left: 0%; /* makes the div span all the way across the viewing area */
            top: 0%; /* makes the div span all the way across the viewing area */
            background-color: black;
            -moz-opacity: 0.7; /* makes the div transparent, so you have a cool overlay effect */
            opacity: .70;
            filter: alpha(opacity=70);
            width: 100%;
            height: 100%;
            z-index: 1031; /* makes the div the second most top layer, so it’ll lay on top of everything else EXCEPT for divs with a higher z-index (meaning the #overlay ruleset) */
        }
    </style>
</head>
<body style="padding:80px 25px 0px 25px;">
    <nav class="navbar navbar-default navbar-fixed-top" role="navigation">
        <div class="navbar-header">
            <a class="navbar-brand" href="/">Nordis</a>
        </div>
    </nav>
    <script type="text/javascript">
        function ErrorCtrl($scope,$element) {
            $scope.exception;
            $scope.loaded = true;
            $scope.$on('onAlert',function(e,msg){
                if (msg.sMsg)
                    $scope.exception = msg.sMsg+' '+msg.sDetail;
                else if (msg.sException)
                    $scope.exception = msg.sException;
                else if (msg.head)
                    $scope.exception = msg.head+' '+(msg.body||'');
                else
                    $scope.exception = msg;
            });
            $scope.dismiss = function(){
                $scope.exception = null;
            };
            angular.element($element).removeClass('hide');
        }
        function ConfirmCtrl($scope,$element){
            $scope.msg;
            $scope.$on('onConfirm',function(event,msg){
                $scope.msg = msg;
            });
            $scope.dismiss = function(btn){
                if (btn && btn.callback)
                    btn.callback();
                $scope.msg = null;
            };
            angular.element($element).removeClass('hide');
        }
        function LoadingCtrl($scope,$element){
            $scope.loading = false;
            $scope.$on('onLoad',function(){
                $scope.loading = true;
                setTimeout(function(){
                    $scope.loading = false;
                    $scope.$apply();
                },5000);
            });
            $scope.$on('onUnload',function(){
                setTimeout(function(){
                    $scope.loading = false;
                    $scope.$apply();
                },500);
            });
            angular.element($element).removeClass('hide');
        }
    </script>
    <div class="hide" ng-controller="ErrorCtrl" ng-show="exception" >
        <div class="fade" ng-click="dismiss()"></div>
        <div class="col-lg-9 alert alert-danger alert-dismissable navbar-fixed-top" style="margin:38px 40px 0px 40px;z-index:1032;">
            <button type="button" class="close" data-dismiss="alert" aria-hidden="true" ng-click="dismiss()">&times;</button>
            <span ng-bind="exception"></span>
        </div>
    </div>
    <div class="hide" ng-controller="ConfirmCtrl" ng-show="msg!=null">
        <div class="fade" ng-click="dismiss()"></div>
        <div class="alert alert-warning alert-dismissable navbar-fixed-top" style="margin:38px 40px 0px 40px;z-index:1032;">
            <button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>
            <h4 ng-bind="msg.head" ng-show="msg.head"></h4>
            <span ng-bind="msg.body" ng-show="msg.body"></span>
            <div class="pull-right">
                <button ng-repeat="btn in msg.buttons" style="margin-right:6px;" ng-class="btn.class" ng-bind="btn.label" ng-click="dismiss(btn);"></button>
            </div>
        </div>
    </div>

    <img ng-show="loading" class="navbar-fixed-top hide" style="margin:auto;margin-top:-10px;" src="/assets/horizontal-loader.gif" ng-controller="LoadingCtrl"/>